#!/bin/bash

# Enhanced Pre-commit Hook for AI Development
# Integrates with existing lint-staged setup
# Add package freshness checks when ready

set -e

echo "ğŸ” Running enhanced pre-commit checks..."

# 1. Run existing lint-staged (ESLint + Prettier)
echo "ğŸ“ Running lint-staged..."
npx lint-staged

# 2. Run existing test suite 
echo "ğŸ§ª Running tests..."
npm run test:run

# 3. Type checking
echo "ğŸ” Type checking..."
npm run type-check

# 4. Security audit (current - only fails on high/critical)
echo "ğŸ”’ Security audit..."
npm audit --audit-level=high

# 5. Package freshness check (FUTURE - currently disabled)
# Uncomment when ready to enforce:
# echo "ğŸ“¦ Checking package freshness..."
# node scripts/check-package-freshness.js

echo "âœ… All pre-commit checks passed!"